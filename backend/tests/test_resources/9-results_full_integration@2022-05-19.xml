<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="2" skipped="1" tests="82" time="8595.762" timestamp="2022-05-19T02:13:33.541929" hostname="runner-brnxxjxm-project-12501706-concurrent-0"><testcase classname="tests.test_access.TestAccess" name="test_ok" file="tests/test_access.py" line="170" time="273.707" /><testcase classname="tests.test_basic_integration.TestBasicIntegrationOpenSource" name="test_update_failover_server" file="tests/test_basic_integration.py" line="309" time="349.719" /><testcase classname="tests.test_basic_integration.TestBasicIntegrationOpenSource" name="test_update_jwt_expired" file="tests/test_basic_integration.py" line="382" time="344.275" /><testcase classname="tests.test_basic_integration.TestBasicIntegrationOpenSource" name="test_double_update_rofs" file="tests/test_basic_integration.py" line="371" time="623.197" /><testcase classname="tests.test_basic_integration.TestBasicIntegrationOpenSource" name="test_failed_updated_and_valid_update" file="tests/test_basic_integration.py" line="390" time="491.175" /><testcase classname="tests.test_basic_integration.TestBasicIntegrationOpenSource" name="test_forced_inventory_update_from_client" file="tests/test_basic_integration.py" line="412" time="176.681" /><testcase classname="tests.test_basic_integration.TestBasicIntegrationOpenSource" name="test_update_no_compression" file="tests/test_basic_integration.py" line="398" time="343.755" /><testcase classname="tests.test_configuration.TestConfiguration" name="test_configuration" file="tests/test_configuration.py" line="42" time="175.144" /><testcase classname="tests.test_basic_integration.TestBasicIntegrationOpenSource" name="test_forced_update_check_from_client" file="tests/test_basic_integration.py" line="405" time="274.409" /><testcase classname="tests.test_deployment_aborting.TestDeploymentAbortingOpenSource" name="test_deployment_abortion_instantly" file="tests/test_deployment_aborting.py" line="85" time="461.902" /><testcase classname="tests.test_bootstrapping.TestBootstrappingOpenSource" name="test_bootstrap" file="tests/test_bootstrapping.py" line="111" time="388.813" /><testcase classname="tests.test_bootstrapping.TestBootstrappingOpenSource" name="test_reject_bootstrap" file="tests/test_bootstrapping.py" line="115" time="547.500" /><testcase classname="tests.test_compat.TestClientCompatibilityOpenSource" name="test_compatibility" file="tests/test_compat.py" line="310" time="551.330" /><testcase classname="tests.test_db_migration.TestDBMigrationOpenSource" name="test_migrate_from_legacy_mender_v1_failure" file="tests/test_db_migration.py" line="178" time="574.904" /><testcase classname="tests.test_fault_tolerance.TestFaultToleranceOpenSource" name="test_deployed_during_network_outage" file="tests/test_fault_tolerance.py" line="392" time="433.991" /><testcase classname="tests.test_demo_artifact.TestDemoArtifact" name="test_demo_artifact" file="tests/test_demo_artifact.py" line="105" time="462.674" /><testcase classname="tests.test_fault_tolerance.TestFaultToleranceOpenSource" name="test_image_download_retry_timeout[test_set0]" file="tests/test_fault_tolerance.py" line="400" time="392.826" /><testcase classname="tests.test_deployment_aborting.TestDeploymentAbortingOpenSource" name="test_deployment_abortion_downloading" file="tests/test_deployment_aborting.py" line="91" time="253.506" /><testcase classname="tests.test_db_migration.TestDBMigrationOpenSource" name="test_migrate_from_legacy_mender_v1_success" file="tests/test_db_migration.py" line="185" time="961.446" /><testcase classname="tests.test_fault_tolerance.TestFaultToleranceOpenSource" name="test_update_image_breaks_networking" file="tests/test_fault_tolerance.py" line="381" time="288.122" /><testcase classname="tests.test_fault_tolerance.TestFaultToleranceOpenSource" name="test_image_download_retry_timeout[test_set1]" file="tests/test_fault_tolerance.py" line="400" time="530.138" /><testcase classname="tests.test_filetransfer.TestFileTransfer" name="test_filetransfer_limits_upload" file="tests/test_filetransfer.py" line="668" time="392.874" /><testcase classname="tests.test_image_update_failures.TestFailuresOpenSource" name="test_large_update_image" file="tests/test_image_update_failures.py" line="92" time="172.519" /><testcase classname="tests.test_deployment_aborting.TestDeploymentAbortingOpenSource" name="test_deployment_abortion_rebooting" file="tests/test_deployment_aborting.py" line="99" time="309.866" /><testcase classname="tests.test_inventory.TestInventoryOpenSource" name="test_inventory" file="tests/test_inventory.py" line="274" time="135.415" /><testcase classname="tests.test_filetransfer.TestFileTransfer" name="test_filetransfer_limits_download" file="tests/test_filetransfer.py" line="677" time="338.468" /><testcase classname="tests.test_inventory.TestInventoryOpenSource" name="test_inventory_update_after_successful_deployment" file="tests/test_inventory.py" line="278" time="203.320" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal" name="test_bogus_proto_message" file="tests/test_mender_connect.py" line="260" time="168.663" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal" name="test_regular_protocol_commands" file="tests/test_mender_connect.py" line="44" time="14.311" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal" name="test_dbus_reconnect" file="tests/test_mender_connect.py" line="115" time="24.928" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal" name="test_websocket_reconnect" file="tests/test_mender_connect.py" line="145" time="100.798" /><testcase classname="tests.test_fault_tolerance.TestFaultToleranceOpenSource" name="test_image_download_retry_hosts_broken" file="tests/test_fault_tolerance.py" line="414" time="515.325" /><testcase classname="tests.test_keepalive.TestMenderClientKeepAlive" name="test_keepalive_idle_connections" file="tests/test_keepalive.py" line="126" time="316.398" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal" name="test_bogus_shell_message" file="tests/test_mender_connect.py" line="164" time="5.214" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal" name="test_session_recording" file="tests/test_mender_connect.py" line="181" time="53.118" /><testcase classname="tests.test_filetransfer_cli.TestFileTransferCLI" name="test_filetransfer_cli" file="tests/test_filetransfer_cli.py" line="189" time="242.691" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal_1_0" name="test_regular_protocol_commands" file="tests/test_mender_connect.py" line="44" time="149.833" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal_1_0" name="test_dbus_reconnect" file="tests/test_mender_connect.py" line="115" time="71.284" /><testcase classname="tests.test_grouping.TestGroupingOpenSource" name="test_basic_groups" file="tests/test_grouping.py" line="176" time="211.521" /><testcase classname="tests.test_fault_tolerance.TestFaultToleranceOpenSource" name="test_rootfs_conf_missing_from_new_update" file="tests/test_fault_tolerance.py" line="422" time="344.992" /><testcase classname="tests.test_keepalive.TestMenderClientKeepAlive" name="test_keepalive_disable" file="tests/test_keepalive.py" line="156" time="278.474" /><testcase classname="tests.test_grouping.TestGroupingOpenSource" name="test_update_device_group" file="tests/test_grouping.py" line="179" time="618.461" /><testcase classname="tests.test_mender_gateway.TestMenderGatewayOpenSource" name="test_deployment_one_device" file="tests/test_mender_gateway.py" line="421" time="350.248" /><testcase classname="tests.test_filetransfer.TestFileTransfer" name="test_filetransfer" file="tests/test_filetransfer.py" line="635" time="146.159" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal_1_0" name="test_websocket_reconnect" file="tests/test_mender_connect.py" line="145" time="226.053" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal_1_0" name="test_bogus_shell_message" file="tests/test_mender_connect.py" line="164" time="5.221" /><testcase classname="tests.test_mender_gateway.TestMenderGatewayOpenSource" name="test_deployment_gateway_and_one_device" file="tests/test_mender_gateway.py" line="432" time="790.433" /><testcase classname="tests.test_mender_connect.TestRemoteTerminal_1_0" name="test_session_recording" file="tests/test_mender_connect.py" line="181" time="53.141" /><testcase classname="tests.test_mender_gateway.TestMenderGatewayOpenSource" name="test_deployment_two_devices_parallel_updates_one_failure" file="tests/test_mender_gateway.py" line="478" time="269.420"><skipped type="pytest.skip" message="Disabled due to MEN-5567.">/builds/Northern.tech/Mender/integration/tests/tests/test_mender_gateway.py:263: Disabled due to MEN-5567.</skipped></testcase><testcase classname="tests.test_filetransfer.TestFileTransfer" name="test_filetransfer_not_implemented" file="tests/test_filetransfer.py" line="658" time="497.475" /><testcase classname="tests.test_image_update_failures.TestFailuresOpenSource" name="test_update_image_id_already_installed" file="tests/test_image_update_failures.py" line="84" time="4025.087"><failure message="RuntimeError: Device never rebooted">self = &lt;tests.tests.test_image_update_failures.TestFailuresOpenSource object at 0x7f5d657d9820&gt;
standard_setup_one_client_bootstrapped = &lt;testutils.infra.container_manager.docker_compose_manager.DockerComposeStandardSetup object at 0x7f5d65300be0&gt;
valid_image_with_mender_conf = &lt;function valid_image_with_mender_conf.&lt;locals&gt;.&lt;lambda&gt; at 0x7f5d6511f700&gt;

    @MenderTesting.slow
    def test_update_image_id_already_installed(
        self, standard_setup_one_client_bootstrapped, valid_image_with_mender_conf,
    ):
&gt;       self.do_test_update_image_id_already_installed(
            standard_setup_one_client_bootstrapped, valid_image_with_mender_conf
        )

tests/test_image_update_failures.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/test_image_update_failures.py:47: in do_test_update_image_id_already_installed
    reboot.verify_reboot_performed()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &lt;testutils.infra.device.RebootDetector object at 0x7f5d652f2b50&gt;
max_wait = 3600, number_of_reboots = 1

    def verify_reboot_performed(self, max_wait=60 * 60, number_of_reboots=1):
        if self.server is None:
            raise RuntimeError(
                "verify_reboot_performed() used outside of 'with' scope."
            )
    
        logger.info("Waiting for client to reboot %d time(s)", number_of_reboots)
        if not self.verify_reboot_performed_impl(
            max_wait=max_wait, number_of_reboots=number_of_reboots
        ):
&gt;           raise RuntimeError("Device never rebooted")
E           RuntimeError: Device never rebooted

../testutils/infra/device.py:237: RuntimeError</failure></testcase><testcase classname="tests.test_mender_gateway.TestMenderGatewayOpenSource" name="test_deployment_two_devices_parallel_updates_one_aborted" file="tests/test_mender_gateway.py" line="489" time="4103.083"><failure message="Failed: Never found: rebooting:1, only seen: {&quot;{'aborted': 0, 'already-installed': 0, 'decommissioned': 0, 'downloading': 0, 'failure': 0, 'installing': 0, 'noartifact': 0, 'pause_before_committing': 0, 'pause_before_installing': 0, 'pause_before_rebooting': 0, 'pending': 1, 'rebooting': 0, 'success': 0}&quot;, &quot;{'aborted': 0, 'already-installed': 0, 'decommissioned': 0, 'downloading': 0, 'failure': 0, 'installing': 0, 'noartifact': 0, 'pause_before_committing': 0, 'pause_before_installing': 0, 'pause_before_rebooting': 0, 'pending': 0, 'rebooting': 0, 'success': 0}&quot;, &quot;{'aborted': 0, 'already-installed': 0, 'decommissioned': 0, 'downloading': 1, 'failure': 0, 'installing': 0, 'noartifact': 0, 'pause_before_committing': 0, 'pause_before_installing': 0, 'pause_before_rebooting': 0, 'pending': 0, 'rebooting': 0, 'success': 0}&quot;} after 3600 seconds">self = &lt;tests.tests.test_mender_gateway.TestMenderGatewayOpenSource object at 0x7f7bb8893850&gt;
standard_setup_two_clients_bootstrapped_with_gateway = &lt;testutils.infra.container_manager.docker_compose_manager.DockerComposeStandardSetupWithGateway object at 0x7f7bb896c8e0&gt;
valid_image_with_mender_conf = &lt;function valid_image_with_mender_conf.&lt;locals&gt;.&lt;lambda&gt; at 0x7f7bb8609e50&gt;

    @MenderTesting.fast
    def test_deployment_two_devices_parallel_updates_one_aborted(
        self,
        standard_setup_two_clients_bootstrapped_with_gateway,
        valid_image_with_mender_conf,
    ):
&gt;       self.do_test_deployment_two_devices_parallel_updates_one_aborted(
            standard_setup_two_clients_bootstrapped_with_gateway,
            valid_image_with_mender_conf,
        )

tests/test_mender_gateway.py:496: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/test_mender_gateway.py:339: in do_test_deployment_two_devices_parallel_updates_one_aborted
    deploy.check_expected_statistics(deployment_id_2, "rebooting", 1)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &lt;tests.MenderAPI.deployments.Deployments object at 0x7f7bb89cea90&gt;
deployment_id = '86633cf1-699c-4fc3-ab00-8006c69ba9fc'
expected_status = 'rebooting', expected_count = 1, max_wait = 3600
polling_frequency = 0.2

    def check_expected_statistics(
        self,
        deployment_id,
        expected_status,
        expected_count,
        max_wait=60 * 60,
        polling_frequency=0.2,
    ):
        timeout = time.time() + max_wait
        seen = set()
    
        while time.time() &lt;= timeout:
            time.sleep(polling_frequency)
    
            data = self.get_statistics(deployment_id)
            seen.add(str(data))
    
            if int(data["failure"]) &gt; 0 and expected_status != "failure":
                all_failed_logs = ""
                for device in self.devauth.get_devices():
                    try:
                        all_failed_logs += (
                            self.get_logs(device["id"], deployment_id) + "\n" * 5
                        )
                    except Exception:
                        logger.warning("failed to get logs.")
    
                pytest.fail(
                    "deployment unexpectedly failed, here are the deployment logs: \n\n %s"
                    % (all_failed_logs)
                )
    
            if data[expected_status] == expected_count:
                return
            continue
    
        if time.time() &gt; timeout:
&gt;           pytest.fail(
                "Never found: %s:%s, only seen: %s after %d seconds"
                % (expected_status, expected_count, str(seen), max_wait)
            )
E           Failed: Never found: rebooting:1, only seen: {"{'aborted': 0, 'already-installed': 0, 'decommissioned': 0, 'downloading': 0, 'failure': 0, 'installing': 0, 'noartifact': 0, 'pause_before_committing': 0, 'pause_before_installing': 0, 'pause_before_rebooting': 0, 'pending': 1, 'rebooting': 0, 'success': 0}", "{'aborted': 0, 'already-installed': 0, 'decommissioned': 0, 'downloading': 0, 'failure': 0, 'installing': 0, 'noartifact': 0, 'pause_before_committing': 0, 'pause_before_installing': 0, 'pause_before_rebooting': 0, 'pending': 0, 'rebooting': 0, 'success': 0}", "{'aborted': 0, 'already-installed': 0, 'decommissioned': 0, 'downloading': 1, 'failure': 0, 'installing': 0, 'noartifact': 0, 'pause_before_committing': 0, 'pause_before_installing': 0, 'pause_before_rebooting': 0, 'pending': 0, 'rebooting': 0, 'success': 0}"} after 3600 seconds

MenderAPI/deployments.py:240: Failed</failure></testcase><testcase classname="tests.test_mender_gateway.TestMenderGatewayOpenSource" name="test_deployment_two_devices_update_one" file="tests/test_mender_gateway.py" line="456" time="509.089" /><testcase classname="tests.test_mender_gateway.TestMenderGatewayOpenSource" name="test_deployment_two_devices_update_both" file="tests/test_mender_gateway.py" line="445" time="525.286" /><testcase classname="tests.test_mender_gateway.TestMenderGatewayOpenSource" name="test_deployment_two_devices_parallel_updates" file="tests/test_mender_gateway.py" line="467" time="389.383" /><testcase classname="tests.test_preauth.TestPreauth" name="test_fail_preauth_existing" file="tests/test_preauth.py" line="163" time="136.979" /><testcase classname="tests.test_security.TestSecurityOpenSource" name="test_ssl_only" file="tests/test_security.py" line="59" time="78.195" /><testcase classname="tests.test_remote_terminal.TestRemoteTerminalOpenSource" name="test_portforward" file="tests/test_remote_terminal.py" line="77" time="132.574" /><testcase classname="tests.test_security.TestSecurityOpenSource" name="test_token_token_expiration" file="tests/test_security.py" line="115" time="144.406" /><testcase classname="tests.test_signed_image_update.TestSignedUpdatesOpenSource" name="test_signed_artifact_success" file="tests/test_signed_image_update.py" line="74" time="222.994" /><testcase classname="tests.test_signed_image_update.TestSignedUpdatesOpenSource" name="test_unsigned_artifact_fails_deployment[force_new]" file="tests/test_signed_image_update.py" line="81" time="215.356" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_reboot_recovery[simulate_powerloss_artifact_install_enter-test_set0]" file="tests/test_state_scripts.py" line="934" time="143.075" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_reboot_recovery[simulate_powerloss_in_artifact_commit_leave-test_set2]" file="tests/test_state_scripts.py" line="934" time="50.830" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_reboot_recovery[simulate_powerloss_in_commit_enter-test_set1]" file="tests/test_state_scripts.py" line="934" time="138.241" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_Idle_Enter_script-test_set1]" file="tests/test_state_scripts.py" line="947" time="33.979" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Normal_success-test_set0]" file="tests/test_state_scripts.py" line="947" time="34.302" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_Idle_Leave_script-test_set2]" file="tests/test_state_scripts.py" line="947" time="34.051" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_Sync_Enter_script-test_set3]" file="tests/test_state_scripts.py" line="947" time="27.968" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_Sync_Leave_script-test_set4]" file="tests/test_state_scripts.py" line="947" time="27.851" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_Download_Enter_script-test_set5]" file="tests/test_state_scripts.py" line="947" time="56.316" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_Download_Leave_script-test_set6]" file="tests/test_state_scripts.py" line="947" time="32.451" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_ArtifactCommit_Enter_script-test_set8]" file="tests/test_state_scripts.py" line="947" time="35.248" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_ArtifactInstall_Enter_script-test_set7]" file="tests/test_state_scripts.py" line="947" time="34.161" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Failure_in_ArtifactCommit_Leave_script-test_set9]" file="tests/test_state_scripts.py" line="947" time="34.429" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Corrupted_script_version_in_data-test_set10]" file="tests/test_state_scripts.py" line="947" time="42.005" /><testcase classname="tests.test_state_scripts.TestStateScriptsOpenSource" name="test_state_scripts[Corrupted_script_version_in_etc-test_set11]" file="tests/test_state_scripts.py" line="947" time="82.498" /><testcase classname="tests.test_update_modules.TestUpdateModulesOpenSource" name="test_rootfs_image_rejected" file="tests/test_update_modules.py" line="106" time="142.477" /><testcase classname="tests.test_update_modules.TestUpdateModulesOpenSource" name="test_rootfs_update_module_success" file="tests/test_update_modules.py" line="112" time="188.277" /><testcase classname="tests.test_mender_gateway.TestMenderGatewayOpenSource" name="test_deployment_two_devices_parallel_updates_multiple_deployments" file="tests/test_mender_gateway.py" line="500" time="485.906" /><testcase classname="tests.test_preauth.TestPreauth" name="test_ok_preauth_and_bootstrap" file="tests/test_preauth.py" line="157" time="109.492" /><testcase classname="tests.test_preauth.TestPreauth" name="test_ok_preauth_and_remove" file="tests/test_preauth.py" line="160" time="80.517" /><testcase classname="tests.test_portforward.TestPortForwardOpenSource" name="test_portforward" file="tests/test_portforward.py" line="167" time="198.918" /></testsuite></testsuites>